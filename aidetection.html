<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Detection</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
           
            min-height: 100vh;
            padding: 10px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            overflow: hidden;
            justify-content: end;
            align-items: end;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px;
            text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { opacity: 0.9; font-size: 1.1em; }
        .content { padding: 40px; }
        .input-section { margin-bottom: 30px; }
        .input-section label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }
        .input-section textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
        }
        .input-section textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        button {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 200px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102,126,234,0.4);
        }
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #e0e0e0;
        }
        .btn-secondary:hover { background: #e9ecef; }
        .results { margin-top: 10px; display: none; }
        .results.show { display: block; }
        
        /* Layout */
        .results-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 20px;
        }
        
        .results-left {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .results-right {
            background: #ffffff;
            border: none;
            border-radius: 0;
            padding: 20px 0;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .text-viewer {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 15px;
            line-height: 1.8;
            color: #1f2937;
            white-space: pre-wrap;
            word-wrap: break-word;
            text-align: left;
        }
        
        .text-viewer-header {
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 0;
            border-bottom: none;
            text-align: left;
        }
        
        .ai-sentence {
            background: #fef3c7;
            padding: 2px 4px;
            border-left: 3px solid #f59e0b;
            margin: 2px 0;
            border-radius: 3px;
            display: inline-block;
            width: 100%;
        }
        
        .sentence-highlight {
            background: #fde68a;
            padding: 2px 4px;
            margin: 0;
            border-radius: 2px;
            display: inline;
            cursor: help;
            transition: all 0.2s;
        }
        
        .sentence-highlight:hover {
            background: #fef3c7;
        }
        
        .human-sentence {
            padding: 0;
            margin: 0;
            display: inline;
        }
        .score-card {
            background: #ffffff;
            padding: 4px 6px;
            border-radius: 0;
            text-align: center;
            margin-bottom: -32px;
            box-shadow: none;
            border: none;
        }
        
        /* Semi-Circular Gauge Styles */
        .meter-container {
            position: relative;
            width: 500px;
            height: 280px;
            margin: 0 auto -148px;
           
        }
        
        .meter-svg {
            width: 54%;
            height: 50%;
            overflow: visible;
        }
        
        .meter-track {
            fill: none;
            stroke: #e5e7eb;
            stroke-width: 30;
            stroke-linecap: round;
        }
        
        .meter-fill {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            stroke-dasharray: 471.24;
            stroke-dashoffset: 471.24;
            transition: stroke-dashoffset 1.5s ease-in-out;
            transform-origin: center;
        }
        
        /* Gradient fill for semi-circle */
        .meter-fill-gradient {
            fill: none;
            stroke-width: 30;
            stroke-linecap: round;
            stroke-dasharray: 471.24;
            stroke-dashoffset: 471.24;
            transition: stroke-dashoffset 1.5s ease-in-out;
            stroke: url(#meterGradient);
        }
        
        .meter-center {
            position: absolute;
            top: 32%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        
        .meter-value {
            font-size: 2em;
            font-weight: 400;
            line-height: 1;
            margin-bottom: 0;
            color: #1f2937;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .meter-ai-text {
            font-size: 0.8em;
            color: #6b7280;
            font-weight: 600;
            letter-spacing: 2px;
            margin-top: 8px;
            text-transform: uppercase;
        }
        
        .meter-percent {
            font-size: 0.4em;
            color: #1f2937;
            font-weight: 700;
            vertical-align: super;
        }
        
        .confidence-badge {
            display: inline-block;
            padding: 10px 24px;
            border-radius: 25px;
            font-weight: 600;
            margin-top: 15px;
            font-size: 1em;
            transition: all 0.3s;
        }
        
        .confidence-high { 
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #dc2626;
            border: 2px solid #ef4444;
        }
        .confidence-medium { 
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            color: #d97706;
            border: 2px solid #f59e0b;
        }
        .confidence-low { 
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #059669;
            border: 2px solid #10b981;
        }
        .details-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .details-section h3 {
            margin-bottom: 15px;
            color: #333;
        }
        .details-section p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        .issues-list {
            list-style: none;
            padding: 0;
        }
        .issues-list li {
            background: white;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .patterns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .pattern-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        .pattern-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        .pattern-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #667eea;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            margin-top: -30px;
        }
        .loading.show { display: block; }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
            margin-top: -30px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #c33;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç AI Content Detection</h1>
            <p>Analyze text to detect AI-generated content using multiple detection methods</p>
        </div>
        <div class="content">
            <div class="input-section">
                <label for="text-input">Enter text to analyze:</label>
                <textarea id="text-input" placeholder="Paste or type the text you want to analyze for AI detection..."></textarea>
            </div>
            <div class="button-group">
                <button class="btn-primary" id="analyze-btn" onclick="analyzeText()">Analyze Text</button>
                <button class="btn-secondary" onclick="clearAll()">Clear</button>
            </div>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analyzing text... This may take a few moments.</p>
            </div>
            <div id="error-container"></div>
            <div class="results" id="results">
                <div class="results-container">
                    <div class="results-left">
                        <div class="score-card">
                    <div class="meter-container">
                        <svg class="meter-svg" viewBox="0 0 300 150">
                            <defs>
                                <linearGradient id="meterGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                                    <stop offset="30%" style="stop-color:#84cc16;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#fbbf24;stop-opacity:1" />
                                    <stop offset="70%" style="stop-color:#f59e0b;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#ef4444;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <!-- Semi-circle track (bottom half) -->
                            <path class="meter-track" d="M 50,120 A 100,100 0 0,1 250,120" fill="none"></path>
                            <!-- Semi-circle fill with gradient -->
                            <path class="meter-fill-gradient" id="meter-fill" d="M 50,120 A 100,100 0 0,1 250,120" fill="none"></path>
                        </svg>
                        <div class="meter-center">
                            <div class="meter-value" id="meter-value">
                                <span id="meter-number">0</span><span class="meter-percent">%</span>
                            </div>
                            <div class="meter-ai-text">AI GPT*</div>
                        </div>
                    </div>
                    <div style="margin-top: 30px;">
                        <h2 style="font-size: 1.3em; color: #1f2937; font-weight: 700; margin-bottom: 15px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;" id="result-title">Analyzing Text...</h2>
                    </div>
                </div>
                <script>
                    let currentText = ''; // Store current text for highlighting
                    
                    async function analyzeText() {
                        const text = document.getElementById('text-input').value.trim();
                        if (!text) {
                            showError("Please enter some text to analyze.");
                            return;
                        }
                        currentText = text; // Store text for highlighting
                        document.getElementById('loading').classList.add('show');
                        document.getElementById('results').classList.remove('show');
                        document.getElementById('error-container').innerHTML = '';
                        document.getElementById('analyze-btn').disabled = true;
                        try {
                            const result = await detector.analyzeText(text);
                            
                            // Show results first to ensure elements exist
                            document.getElementById('results').classList.add('show');
                            
                            // Update analog meter
                            const score = result.aiScore;
                            const meterFill = document.getElementById('meter-fill');
                            const meterNumber = document.getElementById('meter-number');
                            const resultTitle = document.getElementById('result-title');
                            
                            // Check if elements exist
                            if (!meterFill || !meterNumber || !resultTitle) {
                                console.error('Required elements not found');
                                showError('Error displaying results. Please refresh the page.');
                                return;
                            }
                            
                            // Determine color based on score
                            let colorClass = 'low';
                            if (score >= 70) {
                                colorClass = 'high';
                            } else if (score >= 40) {
                                colorClass = 'medium';
                            }
                            
                            // Update semi-circular meter fill
                            // Semi-circle arc length = œÄ * radius (for 180 degrees)
                            const radius = 100;
                            const arcLength = Math.PI * radius; // 314.16
                            const offset = arcLength - (score / 100) * arcLength;
                            meterFill.style.strokeDashoffset = offset;
                            meterFill.className = 'meter-fill-gradient';
                            
                            // Update result title based on score
                            if (score >= 70) {
                                resultTitle.textContent = 'Your Text is AI/GPT Generated';
                                resultTitle.style.color = '#1f2937';
                            } else if (score >= 40) {
                                resultTitle.textContent = 'Your Text May Be AI Generated';
                                resultTitle.style.color = '#1f2937';
                            } else {
                                resultTitle.textContent = 'Your Text Appears Human-Written';
                                resultTitle.style.color = '#1f2937';
                            }
                            
                            // Animate meter value counter
                            let currentScore = 0;
                            const targetScore = score;
                            const duration = 1500; // 1.5 seconds
                            const increment = targetScore / (duration / 16); // 60fps
                            const timer = setInterval(() => {
                                currentScore += increment;
                                if (currentScore >= targetScore) {
                                    currentScore = targetScore;
                                    clearInterval(timer);
                                }
                                if (meterNumber) {
                                    meterNumber.textContent = Math.round(currentScore);
                                }
                            }, 16);
                            
                            // Update confidence badge
                            const confidenceBadge = document.getElementById('confidence-badge');
                            if (confidenceBadge) {
                                confidenceBadge.textContent = result.confidence;
                                confidenceBadge.className = `confidence-badge confidence-${result.confidence.toLowerCase()}`;
                            }
                            
                            const detectionMethod = document.getElementById('detection-method');
                            const wordCount = document.getElementById('word-count');
                            if (detectionMethod) detectionMethod.textContent = result.detectionMethod;
                            if (wordCount) wordCount.textContent = result.wordCount;
                            
                            // Show informative message if using fallback
                            let analysisText = result.aiEnhancedAnalysis || "Pattern-based analysis completed.";
                            if (result.detectionMethod === "pattern-based") {
                                analysisText = "Pattern-based analysis completed. " + 
                                    (result.aiEnhancedAnalysis ? result.aiEnhancedAnalysis : 
                                    "AI detection APIs are currently unavailable (quota exceeded or service down).");
                            }
                            const reasoningText = document.getElementById('reasoning-text');
                            const recommendationText = document.getElementById('recommendation-text');
                            if (reasoningText) reasoningText.textContent = analysisText;
                            if (recommendationText) recommendationText.textContent = result.recommendation;
                            
                            // Highlight AI-detected sentences in the text
                            highlightAISentences(currentText, result);
                            
                            const issuesList = document.getElementById('issues-list');
                            const issuesSection = document.getElementById('issues-section');
                            if (issuesList) {
                                issuesList.innerHTML = '';
                                if (result.issues.length > 0) {
                                    result.issues.forEach(issue => {
                                        const li = document.createElement('li');
                                        li.textContent = issue;
                                        issuesList.appendChild(li);
                                    });
                                    if (issuesSection) issuesSection.style.display = 'block';
                                } else {
                                    if (issuesSection) issuesSection.style.display = 'none';
                                }
                            }
                            const patternsGrid = document.getElementById('patterns-grid');
                            if (patternsGrid) {
                                patternsGrid.innerHTML = '';
                                Object.entries(result.patterns).forEach(([key, value]) => {
                                    const div = document.createElement('div');
                                    div.className = 'pattern-item';
                                    const name = key.replace(/([A-Z])/g, ' $1').trim();
                                    div.innerHTML = `<div class="pattern-name">${name}</div><div class="pattern-value">${Math.round(value * 100)}%</div>`;
                                    patternsGrid.appendChild(div);
                                });
                            }
                        } catch (error) {
                            showError(`Error analyzing text: ${error.message}`);
                        } finally {
                            document.getElementById('loading').classList.remove('show');
                            document.getElementById('analyze-btn').disabled = false;
                        }
                    }
                    function showError(message) {
                        const errorContainer = document.getElementById('error-container');
                        errorContainer.innerHTML = `<div class="error">${message}</div>`;
                    }
                    function clearAll() {
                        document.getElementById('text-input').value = '';
                        document.getElementById('results').classList.remove('show');
                        document.getElementById('error-container').innerHTML = '';
                        document.getElementById('loading').classList.remove('show');
                        document.getElementById('text-viewer').innerHTML = '<p style="color: #6b7280; font-style: italic;">Analyze text to see highlighted AI-detected sentences...</p>';
                    }
                    
                    function highlightAISentences(text, result) {
                        const textViewer = document.getElementById('text-viewer');
                        const sentences = text.match(/[^.!?]+[.!?]+/g) || [text];
                        
                        // AI phrases to detect
                        const aiPhrases = [
                            /it('s| is) (important|worth noting|essential|crucial) to (note|mention|understand|remember)/i,
                            /in (conclusion|summary|essence)/i,
                            /it('s| is) (imperative|paramount|vital)/i,
                            /delve into/i,
                            /tapestry of/i,
                            /landscape of/i,
                            /realm of/i,
                            /it('s| is) no secret that/i,
                            /moreover/i,
                            /furthermore/i,
                            /additionally/i,
                            /in today('s| is) digital age/i,
                            /cutting-edge/i,
                            /revolutionize/i,
                            /paradigm shift/i,
                            /game-changer/i,
                            /utilize|leverage|facilitate|implement|endeavor|ascertain|commence|terminate|acquire|magnitude/i
                        ];
                        
                        // Check for formal words
                        const formalWords = /(utilize|leverage|facilitate|implement|endeavor|ascertain|commence|terminate|acquire|magnitude)/gi;
                        
                        // Check for generic phrases
                        const genericPhrases = /(very important|highly effective|greatly beneficial|significant impact|various different|many people|some individuals)/gi;
                        
                        // Check for lack of contractions
                        const contractionPattern = /(won't|can't|don't|isn't|aren't|wasn't|weren't|haven't|hasn't|hadn't|wouldn't|shouldn't|couldn't|mightn't|mustn't|i'm|you're|he's|she's|it's|we're|they're)/gi;
                        
                        let highlightedText = '';
                        
                        sentences.forEach((sentence, index) => {
                            const cleanSentence = sentence.trim();
                            if (!cleanSentence) return;
                            
                            let isAISentence = false;
                            let aiReasons = [];
                            
                            // Check for AI phrases
                            aiPhrases.forEach(phrase => {
                                if (phrase.test(cleanSentence)) {
                                    isAISentence = true;
                                    aiReasons.push('AI phrase detected');
                                }
                            });
                            
                            // Check for formal words
                            const formalMatches = cleanSentence.match(formalWords);
                            if (formalMatches && formalMatches.length >= 2) {
                                isAISentence = true;
                                aiReasons.push('Overly formal language');
                            }
                            
                            // Check for generic phrases
                            const genericMatches = cleanSentence.match(genericPhrases);
                            if (genericMatches && genericMatches.length >= 1) {
                                isAISentence = true;
                                aiReasons.push('Generic language');
                            }
                            
                            // Check for lack of contractions (if sentence is long enough)
                            const wordCount = cleanSentence.split(/\s+/).length;
                            const contractions = cleanSentence.match(contractionPattern);
                            if (wordCount > 15 && (!contractions || contractions.length === 0)) {
                                isAISentence = true;
                                aiReasons.push('Lack of natural contractions');
                            }
                            
                            // Check sentence structure - repetitive starts
                            if (index > 0 && index < sentences.length - 1) {
                                const prevStart = sentences[index - 1].trim().split(' ')[0].toLowerCase();
                                const currStart = cleanSentence.split(' ')[0].toLowerCase();
                                if (prevStart === currStart) {
                                    isAISentence = true;
                                    aiReasons.push('Repetitive structure');
                                }
                            }
                            
                            // Highlight based on overall score - if score is high, more sentences are AI
                            const aiProbability = result.aiScore / 100;
                            if (aiProbability > 0.6 && isAISentence === false) {
                                // If overall score is high, mark more sentences
                                if (Math.random() < aiProbability * 0.3) {
                                    isAISentence = true;
                                }
                            }
                            
                            if (isAISentence) {
                                highlightedText += `<span class="sentence-highlight" title="${aiReasons.join(', ')}">${cleanSentence}</span>`;
                            } else {
                                highlightedText += `<span class="human-sentence">${cleanSentence}</span>`;
                            }
                        });
                        
                        textViewer.innerHTML = highlightedText || '<p style="color: #6b7280;">No sentences detected. Please analyze longer text.</p>';
                    }
                </script>
                <script src="detector.js"></script>

                <div class="results-right">
                    <div class="text-viewer" id="text-viewer">
                        <p style="color: #6b7280; font-style: italic;">Analyze text to see highlighted AI-detected sentences...</p>
                    </div>
                </div>

                <div class="details-section">
                    <h3>Analysis Details</h3>
                    <p><strong>Detection Method:</strong> <span id="detection-method">Pattern-based</span></p>
                    <p><strong>Word Count:</strong> <span id="word-count">0</span></p>
                    <p id="reasoning-text"></p>
                </div>
                            
                    </div>
                    
                  
                </div>
            </div>
        </div>
    </div>
    
    
</body>
</html>
